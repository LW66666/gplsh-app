<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>黑名单记录的frame</title>
    <link rel="stylesheet" type="text/css" href="../../../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/aui.css"/>

    <style>
        body, html {
            position: relative;
            background-color: #fff;
        }

        .bui-list {
            margin-top: 10px;
            transition: all .6s;
        }

        .bui-list .bui-item {
            position: relative;
            width: 100%;
            height: 60px;
            padding-left: 15px;
            border-bottom: 1px solid #f6f6f6;
            transition: all 1s;
        }
        .bui-item .avatar{
            display: inline-block;
            position: relative;
            top: 10px;
            width: 40px;
            height: 40px;
        }
        .bui-item .bui-item-inner{
            display: inline-block;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            padding-left: 10px;
        }
        .bui-item-inner span{
            display: block;
        }
        .bui-item-inner .banner{

            font-size: 0.75rem;
        }
        .bui-item-inner .small{
            font-size: 0.625rem;
            color: #828282;
        }
        .del::before{
            content: '';
            display: block;
            position: absolute;
            background-image: linear-gradient(0, #ffffff, #ffffff 50%, transparent 50%);
            background-image: -webkit-linear-gradient(90deg, #ffffff, #ffffff 50%, transparent 50%);
            background-repeat: no-repeat;
            background-size: 70% 2px;
            background-position: 50% 50%;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            text-align: center;
            background-color: #ff0000;
        }
        .bui-list[isDel = '0'] .del{
            display: none;
        }
    </style>
</head>

<body>
<ul class="bui-list" isDel = "0">
    <li class="bui-item">
        <img class="avatar" src="../../../image/my/blacklist/avatar.png"/>
        <div class="bui-item-inner">
            <span class="banner">微微两笑</span>
            <span class="small">桃子</span>
        </div>
        <i class="del" tapmode  onclick="clickDel(this)"></i>
    </li>
    <li class="bui-item">
        <img class="avatar" src="../../../image/my/blacklist/avatar.png"/>
        <div class="bui-item-inner">
            <span class="banner">微微两笑</span>
            <span class="small">桃子</span>
        </div>
        <i class="del" tapmode  onclick="clickDel(this)"></i>
    </li>
    <li class="bui-item">
        <img class="avatar" src="../../../image/my/blacklist/avatar.png"/>
        <div class="bui-item-inner">
            <span class="banner">微微两笑</span>
            <span class="small">桃子</span>
        </div>
        <i class="del" tapmode  onclick="clickDel(this)"></i>
    </li>
</ul>
</body>

</html>
<script type="text/javascript" src="../../../script/api.js"></script>
<script>
    apiready = function () {
        initAPIEvent();
    };

    /**
     * 初始化API的事件接收
     */
    function initAPIEvent() {
        //监听事件
        api.addEventListener({
            name: 'blacklistIsDelEvent'
        }, function(ret, err) {
            var isDel = ret.value.isDel;
            $api.attr(document.querySelector('.bui-list'),'isDel',isDel);
        });
    }

    function clickDel($this) {
        //这里请求删除
        $api.closest($this,'li').style.marginLeft = '-100%';
        setTimeout(function () {
            $api.remove($api.closest($this,'li'));
        },500)
    }
</script>
